<!DOCTYPE = html>
<html>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        .imgbox {
                display: grid;
                height: 100%;
            }
            .center-fit {
                max-width: 100%;
                max-height: 100vh;
                margin: auto;
            }
        
        .imagewrap {display:inline-block;position:relative;}  
        .button1 {position:absolute;bottom:0;left:65%;}
        .button2 {position:absolute;bottom:40%;right:0;}
        .button3 {position:absolute;right:40%;top:25%;}
        .room_light{position:absolute;bottom:0;left:75%;}
        .wash_light{position:absolute;bottom:40%;right:10%;}
        .sunlight{position:absolute;right:70%;top:35%;}
    
    </style>
    <body>
        <div class="imagewrap">
        {% include "room1.svg" %} 
        
            <form action="{% url 'requestroom' %}" method="post">
                {% csrf_token %}
                <input id='room_light' type="submit" class="button1" value="Add actuator -room_light" />
                </form>
            <button id="changeGreen">Change Font Color Green</button>
            
            <form action="{% url 'requestroom' %}" method="post">
                {% csrf_token %}
                <input id='wash_light' type="submit" class="button2" value="Add actuator -wash_light" />
                </form>
            
            <form action="{% url 'requestroom' %}" method="post">
                {% csrf_token %}
                <input id='sunlight' type="submit" class="button3" value="Add sensor - sunlight" />
                </form>
        
        
        
        </div>
        
<script>

document.getElementById("changeGreen").onclick = function(){
    
	//document.getElementById("changeGreen").style.color = 'green';
    
    var mqtt_server = "127.0.0.1";
    var mqtt_port = 1883;
    var topic = "sensor/sun_light";
    client = new Paho.MQTT.Client(mqtt_server, mqtt_port,"");
    client.onMessageArrived = onMessageArrived;
    client.onMessageArrived = onMessageArrived;
    client.connect({onSuccess:onConnect(topic)});
    
}

function onConnect(topic) {

  //var mqtt_destname = document.getElementById("mqtt_destname").value;  
  client.subscribe(topic);
}

function onMessageArrived(message) {
  var result = message.payloadString;
  document.getElementById("changeGreen").innerHTML = result;
}


</script>
    </body>
</html>